# 📚 Полный контекст проекта "Кружок Станкевича" - Telegram Mini App

> Комплексная образовательная платформа для подготовки к олимпиадам по истории с системой управления для студентов, кураторов и администраторов

---

## 📋 Содержание

1. [Обзор проекта](#обзор-проекта)
2. [Архитектура приложения](#архитектура-приложения)
3. [Роли и функциональность](#роли-и-функциональность)
4. [Дизайн-система](#дизайн-система)
5. [Технический стек](#технический-стек)
6. [Структура кода](#структура-кода)
7. [Ключевые компоненты](#ключевые-компоненты)
8. [Логика работы](#логика-работы)
9. [Интерфейс](#интерфейс)
10. [Система данных](#система-данных)
11. [Планы развития](#планы-развития)

---

## 🎯 Обзор проекта

### Назначение
Telegram Mini App для образовательной платформы "Кружок Станкевича" - полнофункциональная система для организации и управления процессом обучения истории с подготовкой к олимпиадам.

### Ключевые особенности
- ✅ **Три роли**: Студент, Куратор, Администратор
- 🎨 **Современный дизайн**: Apple/OpenAI стиль с темной/светлой темой
- 📱 **Адаптивность**: Mobile-first подход с полноценной desktop версией
- 🔄 **Интерактивность**: Real-time обновления, плавные анимации
- 📊 **100-балльная система**: Прозрачная система оценивания
- 🎓 **Управление курсами**: Несколько курсов (История, МХК, Литература, Обществознание)
- 📝 **Домашние задания**: Полный цикл от создания до проверки
- 📈 **Аналитика**: Детальная статистика и отчеты

### Текущий статус
**Этап 1 (Дизайн) - Завершен ✅**
- Все UI компоненты реализованы
- Макеты для всех ролей готовы
- Темная/светлая тема работает
- Адаптивный дизайн (mobile + desktop) реализован
- Все функции работают с mock данными
- Backend пока не подключен

---

## 🏗 Архитектура приложения

### Технологическая архитектура

```
┌─────────────────────────────────────────────────────┐
│                   PRESENTATION                      │
│  ┌──────────────┐  ┌──────────────┐  ┌───────────┐│
│  │   Student    │  │   Curator    │  │   Admin   ││
│  │    Pages     │  │    Pages     │  │   Panel   ││
│  └──────────────┘  └──────────────┘  └───────────┘│
│            ┌────────────────────────┐              │
│            │   Shared Components    │              │
│            └────────────────────────┘              │
└─────────────────────────────────────────────────────┘
                         ↕
┌─────────────────────────────────────────────────────┐
│                  STATE MANAGEMENT                   │
│  ┌──────────┐  ┌──────────┐  ┌──────────────────┐ │
│  │  Theme   │  │   Role   │  │  ViewMode/Sidebar│ │
│  │ Context  │  │ Context  │  │     Contexts     │ │
│  └──────────┘  └──────────┘  └──────────────────┘ │
└─────────────────────────────────────────────────────┘
                         ↕
┌─────────────────────────────────────────────────────┐
│                    ROUTING                          │
│              React Router DOM v7                    │
│       Role-based routing with auto redirect         │
└─────────────────────────────────────────────────────┘
                         ↕
┌─────────────────────────────────────────────────────┐
│                  DATA LAYER                         │
│         Mock Data (будущий API client)              │
└─────────────────────────────────────────────────────┘
```

### Иерархия компонентов

```
App.tsx
├── ThemeProvider
│   ├── ViewModeProvider
│   │   ├── RoleProvider
│   │   │   ├── SidebarProvider
│   │   │   │   ├── Router
│   │   │   │   │   ├── Layout
│   │   │   │   │   │   ├── Header (с переключателями роли, темы, режима)
│   │   │   │   │   │   ├── Sidebar (desktop) / Navigation (mobile)
│   │   │   │   │   │   └── Outlet (страницы роли)
```

### Routing структура

**Студент:**
```
/ → Home (главная с ближайшими занятиями)
/schedule → Расписание всех уроков
/homework → Домашние задания
/progress → Статистика и оценки
/contact → Связь с куратором
```

**Куратор:**
```
/ → CuratorHomework (управление домашками)
/submissions → Проверка работ студентов
/reports → Отчетность по группам
```

**Администратор:**
```
/ → AdminPanel (единая панель со вкладками)
  ├── Кураторы (управление)
  ├── Расписание (создание уроков)
  ├── Курсы (назначение кураторов)
  └── Группы (назначение кураторов)
```

---

## 👥 Роли и функциональность

### 🛡️ Роль: АДМИНИСТРАТОР

**Единая панель управления с 4 вкладками**

#### 1. Вкладка "Кураторы"
**Функционал:**
- ➕ Создание новых кураторов
- ✏️ Редактирование данных кураторов
- 🗑️ Удаление кураторов
- 🔑 Управление паролями (сброс)
- 📧 Просмотр контактов (email, Telegram ID)

**Форма создания/редактирования:**
- ФИО (обязательно)
- Email (обязательно)
- Telegram ID (опционально)
- Пароль (только при создании)

**Визуальное представление:**
- Карточки с аватарами (первая буква имени)
- Кнопки действий: Редактировать, Сбросить пароль, Удалить
- Модальное окно для создания/редактирования

#### 2. Вкладка "Расписание"
**Функционал:**
- 📅 Создание уроков
- ✏️ Редактирование уроков
- 🗑️ Удаление уроков
- 👥 Назначение уроков на группы
- 🎓 Указание преподавателя
- 🔗 Добавление Zoom ссылок
- 📎 Прикрепление материалов

**Форма создания урока:**
- Название урока
- Описание
- Курс (выбор из списка)
- Дата и время
- Преподаватель
- Ссылка Zoom
- Группы (множественный выбор)
- Файлы материалов

**Визуальное представление:**
- Календарное представление
- Список уроков по датам
- Фильтр по курсам и группам
- Цветовая кодировка по курсам

#### 3. Вкладка "Курсы"
**Функционал:**
- 👀 Просмотр всех курсов
- 👥 Назначение/снятие кураторов на курсы
- 📊 Просмотр статистики курса (количество уроков, групп)

**Существующие курсы:**
- История России (синий #007AFF)
- МХК (фиолетовый #AF52DE)
- Литература (зеленый #52DE8E)
- Обществознание (оранжевый #FF9500)

**Визуальное представление:**
- Карточки курсов с описанием
- Чекбоксы для назначения кураторов
- Список назначенных кураторов
- Статистика (уроков, групп)

#### 4. Вкладка "Группы"
**Функционал:**
- 👀 Просмотр всех групп
- 👤 Назначение одного куратора на группу
- 📊 Просмотр количества студентов

**Визуальное представление:**
- Карточки групп (grid 2 колонки на desktop)
- Dropdown для выбора куратора
- Индикатор назначенного куратора
- Счетчик студентов

---

### 👩‍🏫 Роль: КУРАТОР

**3 основные страницы**

#### 1. Домашки (главная страница)
**Функционал:**
- ➕ Создание домашних заданий для групп
- ✏️ Редактирование заданий
- 🗑️ Удаление заданий
- 📊 Отслеживание прогресса сдачи
- 👥 Просмотр списка студентов (кто сдал/не сдал)

**Создание домашки:**
```
┌─────────────────────────────────────┐
│ Выбор группы (dropdown)             │
│ Название задания                    │
│ Описание (textarea)                 │
│ Дедлайн (date-time picker)          │
│ [Создать задание] [Отмена]          │
└─────────────────────────────────────┘
```

**Карточка домашки:**
- Название и описание
- Урок (к какому относится)
- Дедлайн
- Прогресс: X/Y сдано (прогресс-бар)
- Кнопки: Редактировать, Удалить
- Разворачивающийся список студентов:
  - ✅ Зеленый - сдано (с датой)
  - ❌ Красный - не сдано

**Визуальное представление:**
- Кнопка "Создать домашку" вверху
- Список карточек заданий
- Цветная прогресс-бар (зеленый 100%, синий 70%+, оранжевый <70%)

#### 2. Сдачи (проверка работ)
**Функционал:**
- 📥 Просмотр всех сданных работ
- ✅ Проверка работ с выставлением оценки
- 💬 Добавление комментариев
- 📎 Прикрепление файла с замечаниями
- 🔍 Фильтр: на проверке / проверено

**Форма проверки:**
```
┌─────────────────────────────────────┐
│ Оценка (0-100)                      │
│ [Живая цветовая индикация]          │
│ - 90-100: зеленый "Отлично"         │
│ - 75-89: синий "Хорошо"             │
│ - 60-74: оранжевый "Удовл."         │
│ - 0-59: красный "Неудовл."          │
│                                     │
│ Комментарий (textarea)              │
│                                     │
│ Файл с замечаниями (optional)       │
│ [Загрузить файл]                    │
│                                     │
│ [Сохранить оценку] [Отмена]         │
└─────────────────────────────────────┘
```

**Карточка сдачи:**
- Имя студента
- Название домашки
- Дата сдачи
- Статус (badge)
- Кнопки: Скачать работу, Проверить
- Если проверено:
  - Оценка (крупно, цветом)
  - Комментарий
  - Файл с замечаниями (если есть)
  - Кнопка "Изменить оценку"

**Статистика вверху:**
- На проверке: X работ (оранжевый)
- Проверено: Y работ (зеленый)

#### 3. Отчёты
**Функционал:**
- 📊 Общая статистика группы
- 🏆 Топ-3 студента
- 📈 Детальная статистика по каждому студенту
- 📊 Прогресс-бары по всем показателям

**Общая статистика (4 карточки):**
- 👥 Всего студентов
- 📈 Средний балл (100 система)
- 📅 Средняя посещаемость (%)
- 📝 Средняя сдача ДЗ (%)

**Показатели группы:**
- Посещаемость (прогресс-бар + описание)
- Выполнение домашек (прогресс-бар + описание)
- Средний балл (прогресс-бар + описание)

**Топ-3 студента:**
```
┌────────────────────────────────────┐
│ 🥇 1. Имя студента                 │
│    Средний балл: 95/100            │
│    ┌─────┬─────────┬──────┐        │
│    │ 100%│   100%  │  95  │        │
│    │Посещ│ Домашки │ Балл │        │
│    └─────┴─────────┴──────┘        │
└────────────────────────────────────┘
```

**Все студенты:**
- Имя студента
- Средний балл (крупно, цветом)
- Прогресс-бары:
  - Посещаемость
  - Домашки

---

### 👨‍🎓 Роль: СТУДЕНТ

**5 основных страниц**

#### 1. Главная
**Структура:**

**Приветствие:**
```
Привет, Всеволод!
Продолжай в том же духе
```

**Ближайшие занятия (2 карточки):**
```
┌───────────────────────────────────┐
│ [История]                         │
│ Древняя Русь: от призвания...     │
│ 🕒 10 октября, 18:00              │
│ 🎥 Онлайн (Zoom)                  │
│ [Перейти в Zoom] ───────────────► │
└───────────────────────────────────┘
```

**Ближайший дедлайн:**
```
┌───────────────────────────────────┐
│ Первые князья                     │
│ 🕒 12 октября, 23:59              │
│ ⏰ Осталось 2 дня                 │
│ [Открыть задание] ────────────►   │
└───────────────────────────────────┘
```

**Статистика (4 показателя):**
```
┌───────┬───────┬───────┬─────────┐
│  12   │   4   │  88   │    1    │
│Посещ. │Сдано ДЗ│Ср.балл│Не сдано │
└───────┴───────┴───────┴─────────┘

Прогресс-бары:
━━━━━━━━━━━━━━━━━━━░ 92% Посещаемость
━━━━━━━━━━━━━━░░░░░░ 80% Домашки
━━━━━━━━━━━━━━━━━░░░ 88% Средний балл
```

**Быстрые действия (mobile only):**
- [Расписание] [Домашки]

#### 2. Расписание
**Функционал:**
- 📅 Календарь всех уроков
- 🎨 Фильтр по курсам (цветные вкладки)
- 🔗 Ссылки Zoom для предстоящих
- 📹 Ссылки записи для прошедших
- 📥 Скачивание конспектов

**Карточка урока:**
```
┌───────────────────────────────────┐
│ [История] [Предстоящий]           │
│ Древняя Русь: от призвания...     │
│ Формирование государства...       │
│                                   │
│ 📅 10 октября 2025                │
│ 🕒 18:00                          │
│ 👨‍🏫 Преподаватель                 │
│ 📍 Онлайн                         │
│                                   │
│ [Перейти в Zoom] ────────────►    │
└───────────────────────────────────┘
```

**Фильтр по курсам (табы):**
- [Все] [История] [МХК] [Литература]
- Цвет активной вкладки соответствует курсу

**Статусы уроков:**
- 🟢 Сегодня (today)
- 🔵 Предстоящие (upcoming)
- ⚪ Завершенные (completed)

#### 3. Домашки
**Функционал:**
- 📝 Список всех домашек
- 📊 Статусы: не сдано / на проверке / проверено
- 📥 Скачивание задания
- 📤 Загрузка решения
- 💯 Просмотр оценки и комментариев
- 📎 Скачивание файла с замечаниями

**Статистика (3 карточки):**
```
┌──────┬──────────┬──────────┐
│  1   │    1     │    2     │
│Не сдано│На проверке│Проверено│
└──────┴──────────┴──────────┘
```

**Карточка домашки (не сдано):**
```
┌───────────────────────────────────┐
│ Первые князья              [⚠️ Не сдано]│
│ Анализ внешней политики...        │
│ 🕒 Дедлайн: 12 октября, 23:59    │
│    (осталось 2 дней)              │
│                                   │
│ [Скачать задание]                 │
│ [Отправить решение] ──────────►   │
└───────────────────────────────────┘
```

**Карточка домашки (на проверке):**
```
┌───────────────────────────────────┐
│ Древняя Русь          [🕒 На проверке]│
│ Сравнительный анализ теорий...    │
│ 🕒 Дедлайн: 10 октября, 23:59    │
│                                   │
│ [Скачать задание]                 │
│ [Моё решение]                     │
│ [Изменить решение]                │
└───────────────────────────────────┘
```

**Карточка домашки (проверено):**
```
┌───────────────────────────────────┐
│ Славяне               [✅ Проверено]│
│ Восточные славяне в VI-IX веках   │
│ 🕒 Дедлайн: 5 октября, 23:59     │
│                                   │
│ ┌─────────────────────────────┐   │
│ │ Оценка: 92/100 (Отлично) 🟢 │   │
│ │ Комментарий куратора:        │   │
│ │ Отличная работа! Хорошо      │   │
│ │ раскрыта тема...             │   │
│ └─────────────────────────────┘   │
│                                   │
│ [Скачать задание]                 │
│ [Моё решение]                     │
│ [Файл с комментариями] ──────►    │
└───────────────────────────────────┘
```

**Загрузка решения:**
- Кнопка "Отправить решение"
- → Показывает input для выбора файла
- → Выбран файл: показывает имя + кнопка "Отправить"
- → Отправка → статус меняется на "на проверке"

#### 4. Прогресс
**Функционал:**
- 📊 Детальная статистика
- 📈 Прогресс-бары
- 🎖️ История оценок

**Статистика (3 карточки):**
```
┌─────────┬─────────┬──────────┐
│    4    │   88    │   92%    │
│  /5     │  /100   │          │
│Сдано ДЗ │Ср. балл │Посещаемость│
└─────────┴─────────┴──────────┘
```

**Детальная статистика:**
```
Посещаемость
━━━━━━━━━━━━━━━━━━━░ 92%
Присутствовал на 11 из 12 занятий

Выполнение домашек
━━━━━━━━━━━━━━░░░░░░ 78%
Сдано 4 из 5 домашек

Средний балл
━━━━━━━━━━━━━━━━━░░░ 88%
88/100 по всем проверенным работам
```

**История оценок:**
```
┌─────────────────────────────────┐
│ 🏆 История оценок [100% система]│
├─────────────────────────────────┤
│ [4] Славяне          92/100 🟢  │
│     5 окт                        │
├─────────────────────────────────┤
│ [3] Славяне (ч.2)    88/100 🔵  │
│     5 окт                        │
├─────────────────────────────────┤
│ [2] Киевская Русь    95/100 🟢  │
│     1 окт                        │
├─────────────────────────────────┤
│ [1] Источники        85/100 🔵  │
│     28 сен                       │
└─────────────────────────────────┘
```

**Цветовая индикация оценок:**
- 🟢 90-100 - Отлично (зеленый)
- 🔵 75-89 - Хорошо (синий)
- 🟡 60-74 - Удовлетворительно (оранжевый)
- 🔴 0-59 - Неудовлетворительно (красный)

#### 5. Связь
**Функционал:**
- 📧 Контакты куратора
- 🤖 ИИ-помощник для вопросов (заглушка)
- 📎 Прикрепление файлов
- 📜 История обращений

**Контакты куратора:**
```
┌───────────────────────────────────┐
│ 👩‍🏫 Куратор                       │
│                                   │
│ Юля Арбузова                      │
│ 📧 arbuzova@example.com           │
│ 💬 @arbuzova_tg                   │
│                                   │
│ [Написать в Telegram] ────────►   │
└───────────────────────────────────┘
```

**Форма вопроса (будущий ИИ-ассистент):**
```
┌───────────────────────────────────┐
│ 🤖 Задать вопрос                  │
│                                   │
│ [Текстовое поле]                  │
│                                   │
│ [📎 Прикрепить файл]              │
│                                   │
│ [Отправить] ──────────────────►   │
└───────────────────────────────────┘
```

**История обращений:**
- Список предыдущих вопросов/ответов
- Статусы: не прочитано / прочитано / получен ответ

---

## 🎨 Дизайн-система

### Философия дизайна

**Вдохновение:** Apple HIG + OpenAI Design System

**Принципы:**
- 🎯 **Минимализм** - только необходимое
- 💡 **Ясность** - интуитивная навигация
- 🌊 **Глубина** - иерархия через тени
- 🌀 **Плавность** - мягкие анимации
- 📱 **Адаптивность** - desktop + mobile

### Цветовая палитра

#### Основные цвета

**Светлая тема:**
```css
Primary:    #007AFF  /* Apple Blue */
Background: #F2F2F7  /* Light Gray */
Surface:    #FFFFFF  /* White */
Secondary:  #F2F2F7  /* Light Gray */
Text:       #000000  /* Black */
TextSecond: #3C3C43  /* Gray */
```

**Темная тема:**
```css
Primary:    #0A5EB0  /* Darker Blue */
Background: #000000  /* True Black */
Surface:    #1C1C1E  /* Dark Gray */
Secondary:  #2C2C2E  /* Darker Gray */
Text:       #FFFFFF  /* White */
TextSecond: #8E8E93  /* Light Gray */
```

#### Семантические цвета

```css
/* Оценки / Статусы */
Success:  #34C759  /* Зеленый - 90-100, проверено */
Primary:  #007AFF  /* Синий - 75-89 */
Warning:  #FF9500  /* Оранжевый - 60-74, на проверке */
Error:    #FF3B30  /* Красный - 0-59, не сдано */
```

#### Курсы

```css
История:        #007AFF  /* Синий */
МХК:            #AF52DE  /* Фиолетовый */
Литература:     #52DE8E  /* Зеленый */
Обществознание: #FF9500  /* Оранжевый */
```

### Типографика

**Семейство шрифтов:**
```css
font-family: -apple-system, BlinkMacSystemFont, 
             'Segoe UI', 'Roboto', 'Helvetica Neue', 
             Arial, sans-serif;
```

**Размеры:**
```
H1:      32px (24px mobile)  bold
H2:      24px (20px mobile)  bold  
H3:      20px (18px mobile)  semibold
Body:    16px (14px mobile)  regular
Small:   14px (12px mobile)  regular
Caption: 12px (10px mobile)  medium
```

### Отступы и размеры

**Spacing Scale:**
```
xs:  4px
sm:  8px
md:  16px
lg:  24px
xl:  32px
2xl: 48px
```

**Border Radius:**
```
sm:  8px   - badges, inputs
md:  12px  - buttons
lg:  16px  - cards (mobile)
xl:  20px  - cards
2xl: 24px  - cards (desktop)
```

**Shadow:**
```css
/* Light theme */
box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);

/* Dark theme */
box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);

/* Hover (desktop) */
box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
```

### Анимации

**Transitions:**
```css
/* Standard */
transition: all 0.2s ease-in-out;

/* Hover */
transition: all 0.15s ease-out;

/* Modal */
transition: all 0.3s ease-in-out;
```

**Transform Effects:**
```css
/* Hover (desktop only) */
hover: scale(1.02);

/* Active */
active: scale(0.98);

/* Card hover */
hover: scale(1.02);
box-shadow: 0 8px 16px rgba(0,0,0,0.12);
```

### Адаптивность

**Breakpoints:**
```
Mobile:  < 640px  (default)
Tablet:  640px - 1024px
Desktop: > 1024px
```

**Desktop Layout:**
```
┌─────────┬────────────────────────┐
│ Sidebar │       Header           │
│  256px  ├────────────────────────┤
│         │                        │
│  Nav    │      Content           │
│ Items   │    max-width: 1200px   │
│         │    centered            │
│         │                        │
│ Footer  │                        │
└─────────┴────────────────────────┘
```

**Mobile Layout:**
```
┌──────────────────────────┐
│        Header            │
├──────────────────────────┤
│                          │
│        Content           │
│     max-width: 672px     │
│       centered           │
│                          │
│                          │
├──────────────────────────┤
│   Bottom Navigation      │
└──────────────────────────┘
```

### UI Компоненты

#### Карточки (Card)
```tsx
<Card hover onClick={() => {}}>
  {children}
</Card>

Стили:
- Background: surface
- Border radius: 20px (16px mobile)
- Padding: 20px (16px mobile)
- Shadow: subtle
- Hover: scale(1.02) + shadow (desktop only)
```

#### Кнопки (Button)
```tsx
<Button variant="primary" size="medium" icon={Plus}>
  Текст
</Button>

Варианты:
- primary: цветная, для основных действий
- secondary: нейтральная, для второстепенных
- danger: красная, для удаления
- ghost: прозрачная, для менее важных

Размеры:
- small: py-2 px-4 text-sm
- medium: py-3 px-6 text-base
- large: py-4 px-8 text-lg
```

#### Progress Bar
```tsx
<ProgressBar 
  progress={85} 
  label="Посещаемость"
  showPercentage
/>

Стили:
- Высота: 8px
- Border radius: full
- Background: secondary
- Fill: primary (анимированный)
- Цвет по значению:
  90+: зеленый
  70+: синий
  50+: оранжевый
  <50: красный
```

#### Status Badge
```tsx
<StatusBadge status="pending" label="На проверке" />

Статусы:
- not-submitted: красный
- pending: оранжевый
- reviewed: зеленый
- success: зеленый
- warning: оранжевый
- error: красный

Стили:
- Padding: 6px 12px
- Border radius: 8px
- Font: 12px, medium
- Background: цвет/10 opacity
```

#### Input / Textarea
```tsx
<input className="input" />
<textarea className="textarea" />

Стили:
- Border: 2px solid gray-300
- Border radius: 12px
- Padding: 12px 16px
- Focus: border primary
- Placeholder: secondary text
```

---

## 🔧 Технический стек

### Frontend

**Core:**
- ⚛️ React 19.1.1
- 📘 TypeScript 5.9.3
- ⚡ Vite 7.1.7

**Routing:**
- 🛣️ React Router DOM 7.9.4

**Styling:**
- 🎨 Tailwind CSS 3.4.0
- 🎭 PostCSS 8.5.6

**Icons:**
- 🎯 Lucide React 0.545.0

**Telegram:**
- 📱 @twa-dev/sdk 8.0.2

**Development:**
- 🔍 ESLint 9.36.0
- 🎨 Prettier (опционально)
- 🧪 TypeScript ESLint 8.45.0

### Backend (будущее)
- 🚀 Node.js + Express / NestJS
- 🗄️ PostgreSQL / MongoDB
- 🔐 JWT Authentication
- 📁 File storage (S3/local)
- 🔌 WebSocket (Socket.io)
- 🎥 Zoom API
- 🤖 Telegram Bot API

### Deployment (будущее)
- 🌐 Vercel / Netlify (frontend)
- 🚀 Railway / Heroku (backend)
- 📦 Docker (containers)
- 🔄 CI/CD (GitHub Actions)

---

## 📁 Структура кода

### Дерево проекта

```
kruzhok-app/
├── public/
│   └── vite.svg
├── src/
│   ├── components/          # UI компоненты
│   │   ├── Button.tsx       # Универсальная кнопка
│   │   ├── Card.tsx         # Карточка
│   │   ├── EmptyState.tsx   # Пустое состояние
│   │   ├── Header.tsx       # Шапка с переключателями
│   │   ├── Layout.tsx       # Основной layout
│   │   ├── LoadingSpinner.tsx # Индикатор загрузки
│   │   ├── Navigation.tsx   # Нижняя навигация (mobile)
│   │   ├── ProgressBar.tsx  # Линейный прогресс
│   │   ├── ProgressCircle.tsx # Круговой прогресс
│   │   ├── ScheduleManagement.tsx # Управление расписанием (admin)
│   │   ├── Sidebar.tsx      # Боковая навигация (desktop)
│   │   └── StatusBadge.tsx  # Бейдж статуса
│   ├── contexts/            # React контексты
│   │   ├── RoleContext.tsx      # Управление ролью
│   │   ├── SidebarContext.tsx   # Состояние sidebar
│   │   ├── ThemeContext.tsx     # Темная/светлая тема
│   │   └── ViewModeContext.tsx  # Desktop/mobile режим
│   ├── pages/               # Страницы приложения
│   │   ├── admin/
│   │   │   └── AdminPanel.tsx   # Панель администратора
│   │   ├── curator/
│   │   │   ├── CuratorHomework.tsx # Управление домашками
│   │   │   ├── Reports.tsx         # Отчетность
│   │   │   └── Submissions.tsx     # Проверка работ
│   │   └── student/
│   │       ├── Contact.tsx    # Связь с куратором
│   │       ├── Home.tsx       # Главная
│   │       ├── Homework.tsx   # Домашние задания
│   │       ├── Progress.tsx   # Прогресс и оценки
│   │       └── Schedule.tsx   # Расписание
│   ├── types/               # TypeScript типы
│   │   └── index.ts         # Все интерфейсы
│   ├── data/                # Mock данные
│   │   └── mockData.ts      # Тестовые данные
│   ├── utils/               # Утилиты
│   │   └── helpers.ts       # Вспомогательные функции
│   ├── App.tsx              # Главный компонент
│   ├── App.css              # Стили App
│   ├── main.tsx             # Точка входа
│   └── index.css            # Глобальные стили
├── index.html               # HTML шаблон
├── package.json             # Зависимости
├── vite.config.ts           # Конфиг Vite
├── tsconfig.json            # Конфиг TypeScript
├── tailwind.config.js       # Конфиг Tailwind
├── postcss.config.js        # Конфиг PostCSS
└── eslint.config.js         # Конфиг ESLint
```

### Ключевые файлы

#### `src/App.tsx` - Роутинг
```tsx
<ThemeProvider>
  <ViewModeProvider>
    <RoleProvider>
      <SidebarProvider>
        <Router>
          <Routes>
            <Route path="/" element={<Layout />}>
              {/* Роутинг по ролям */}
            </Route>
          </Routes>
        </Router>
      </SidebarProvider>
    </RoleProvider>
  </ViewModeProvider>
</ThemeProvider>
```

#### `src/contexts/RoleContext.tsx`
```tsx
type Role = 'student' | 'curator' | 'admin';

interface RoleContextType {
  role: Role;
  setRole: (role: Role) => void;
}

// Переключение роли через Header
```

#### `src/contexts/ThemeContext.tsx`
```tsx
type Theme = 'light' | 'dark';

interface ThemeContextType {
  theme: Theme;
  toggleTheme: () => void;
}

// Сохранение в localStorage
// Переключение класса 'dark' на <html>
```

#### `src/contexts/ViewModeContext.tsx`
```tsx
type ViewMode = 'auto' | 'desktop' | 'mobile';

interface ViewModeContextType {
  viewMode: ViewMode;
  setViewMode: (mode: ViewMode) => void;
  isDesktop: boolean; // computed
}

// auto: window.innerWidth >= 1024
// desktop: forced desktop (sidebar)
// mobile: forced mobile (bottom nav)
```

#### `src/types/index.ts`
```tsx
// Основные типы данных:
- User (id, name, email, role, avatar, telegramId)
- Lesson (id, title, description, date, time, zoomLink, status, materials)
- Homework (id, title, description, lessonId, deadline, status, grade, comment, fileUrl)
- Submission (id, homeworkId, studentId, submittedDate, fileUrl, status, grade, comment)
- Progress (userId, attendance, homeworkCompletion, averageGrade, lessons, homeworks)
- Group (id, name, description, curatorId, studentCount, courseIds)
- Course (id, name, description, curatorIds, groupIds, lessonsCount)
```

#### `src/data/mockData.ts`
```tsx
// Mock данные для демонстрации:
- currentUser
- curator
- admin
- mockLessons[]
- mockHomework[]
- mockSubmissions[]
- mockProgress
- mockGroupStats
- mockGroups[]
- mockCourses[]
- mockCurators[]
```

---

## ⚙️ Логика работы

### Процесс создания урока (Админ)

```
1. Админ → Вкладка "Расписание"
2. Нажимает "Создать урок"
3. Заполняет форму:
   - Название урока
   - Описание
   - Курс (выбор)
   - Дата и время
   - Преподаватель
   - Ссылка Zoom
   - Группы (множественный выбор)
   - Файлы материалов
4. Сохраняет
5. Урок появляется:
   - В календаре админа
   - В расписании всех студентов назначенных групп
   - Студенты получают уведомление (будущее)
```

### Процесс работы с домашкой

```
Создание (Куратор):
1. Куратор → Страница "Домашки"
2. Нажимает "Создать домашку для группы"
3. Заполняет форму:
   - Выбор группы
   - Название задания
   - Описание
   - Дедлайн
4. Сохраняет
5. Домашка появляется у всех студентов группы

Выполнение (Студент):
1. Студент → Страница "Домашки"
2. Видит задание со статусом "не сдано"
3. Нажимает "Скачать задание"
4. Выполняет работу
5. Нажимает "Отправить решение"
6. Выбирает файл
7. Отправляет
8. Статус меняется на "на проверке"

Проверка (Куратор):
1. Куратор → Страница "Сдачи"
2. Видит работу студента со статусом "на проверке"
3. Нажимает "Скачать работу"
4. Проверяет
5. Нажимает "Проверить"
6. Заполняет форму:
   - Оценка (0-100)
   - Комментарий
   - Файл с замечаниями (опционально)
7. Сохраняет оценку
8. Статус меняется на "проверено"

Просмотр (Студент):
1. Студент → Страница "Домашки"
2. Видит задание со статусом "проверено"
3. Видит:
   - Оценку (крупно, цветом)
   - Комментарий куратора
   - Кнопку скачать файл с замечаниями
4. Оценка появляется в разделе "Прогресс"
```

### Процесс назначения кураторов

```
На курс (один курс - много кураторов):
1. Админ → Вкладка "Курсы"
2. Выбирает курс
3. Ставит галочки на кураторов
4. Кураторы получают доступ к:
   - Созданию домашек для групп этого курса
   - Проверке работ студентов этого курса
   - Статистике групп этого курса

На группу (одна группа - один куратор):
1. Админ → Вкладка "Группы"
2. Выбирает группу
3. Выбирает куратора из dropdown
4. Куратор получает доступ к:
   - Созданию домашек для этой группы
   - Проверке работ студентов этой группы
   - Статистике этой группы
```

### Система оценки

```
100-балльная система:

Цветовая индикация:
90-100: 🟢 Зеленый   "Отлично"
75-89:  🔵 Синий     "Хорошо"
60-74:  🟡 Оранжевый "Удовлетворительно"
0-59:   🔴 Красный   "Неудовлетворительно"

Применяется:
- При выставлении оценок (форма куратора)
- В карточке проверенной домашки (студент)
- В истории оценок (студент)
- В статистике (куратор, студент)
- В топ-3 студентов (куратор)

Расчет среднего балла:
- Сумма всех оценок / количество оценок
- Округление до целого
- Обновляется при каждой новой оценке
```

### Статусы домашек

```
Статусы:
1. not-submitted (не сдано)
   - Красный badge
   - Показан дедлайн и оставшееся время
   - Кнопка "Отправить решение"
   
2. pending (на проверке)
   - Оранжевый badge
   - Показано "Сдано: дата"
   - Кнопки "Моё решение", "Изменить решение"
   
3. reviewed (проверено)
   - Зеленый badge
   - Показана оценка, комментарий
   - Кнопка "Файл с замечаниями" (если есть)

Переходы:
not-submitted → pending (студент загружает файл)
pending → reviewed (куратор выставляет оценку)
reviewed → pending (куратор изменяет оценку)
```

---

## 🎯 Интерфейс

### Навигация

#### Mobile (< 1024px)

**Bottom Navigation:**
```
Студент:
┌──────┬──────┬──────┬──────┬──────┐
│ 🏠   │ 📅   │ 📚   │ 📈   │ 💬   │
│Главная│Расп. │Домашки│Прогр.│Связь │
└──────┴──────┴──────┴──────┴──────┘

Куратор:
┌────────────┬────────────┬────────────┐
│    📚      │     ✅     │    📊      │
│  Домашки   │   Сдачи    │  Отчёты    │
└────────────┴────────────┴────────────┘

Админ:
┌──────────────────────────────────────┐
│              🛡️                      │
│         Админ-панель                 │
└──────────────────────────────────────┘
```

#### Desktop (>= 1024px)

**Sidebar (256px):**
```
┌─────────────────────┐
│  🅺  Кружок          │
│     Студент         │
├─────────────────────┤
│                     │
│ 🏠  Главная      ◄──│ активный
│ 📅  Расписание      │
│ 📚  Домашки         │
│ 📈  Прогресс        │
│ 💬  Связь           │
│                     │
├─────────────────────┤
│ ◄  Свернуть         │
│ © 2025 Кружок...    │
└─────────────────────┘

Collapsed (80px):
┌───┐
│ 🅺 │
├───┤
│🏠 │◄ активный
│📅 │
│📚 │
│📈 │
│💬 │
├───┤
│ ► │
└───┘
```

### Header (sticky)

```
Mobile:
┌────────────────────────────────────────────────┐
│ 🅺 Кружок    [Desktop][👨‍🎓][👩‍🏫][🛡️][🌙]  │
│   Студент                                      │
└────────────────────────────────────────────────┘

Desktop:
┌────────────────────────────────────────────────┐
│               [Desktop][👨‍🎓][👩‍🏫][🛡️][🌙]  │
└────────────────────────────────────────────────┘

Переключатели:
- [Desktop/Mobile] - режим отображения (dev only)
- [👨‍🎓] Студент  - переключение на роль студента
- [👩‍🏫] Куратор - переключение на роль куратора
- [🛡️] Админ    - переключение на роль админа
- [🌙] / [☀️]  - переключение темы

Активная роль: цветной фон + белый текст
```

### Интерактивные элементы

#### Hover эффекты (desktop only)

```css
Карточки:
- hover: scale(1.02)
- hover: shadow увеличивается
- transition: 0.2s ease-in-out

Кнопки:
- hover: opacity 90%
- active: scale(0.95)
- transition: 0.2s ease-in-out

Ссылки навигации:
- hover: background secondary
- active: background primary, text white
```

#### Touch оптимизация (mobile)

```
Минимальные размеры:
- Кнопки: 44x44px
- Навигация items: 44px height
- Чекбоксы: 44x44px touch area
- Inputs: 44px height

Отступы:
- Между кнопками: 8px
- От краев экрана: 16px
- Между карточками: 16px
```

#### Форма проверки домашки (куратор)

```tsx
Живая индикация при вводе оценки:

0-59:
┌─────────────────────────────────┐
│ Оценка (0-100)                  │
│ [____50____]                    │
│ 🔴 Неудовлетворительно          │
└─────────────────────────────────┘
Background: rgba(255, 59, 48, 0.1)
Border: 2px solid #FF3B30

60-74:
┌─────────────────────────────────┐
│ Оценка (0-100)                  │
│ [____70____]                    │
│ 🟡 Удовлетворительно            │
└─────────────────────────────────┘
Background: rgba(255, 149, 0, 0.1)
Border: 2px solid #FF9500

75-89:
┌─────────────────────────────────┐
│ Оценка (0-100)                  │
│ [____85____]                    │
│ 🔵 Хорошо                       │
└─────────────────────────────────┘
Background: rgba(10, 94, 176, 0.1)
Border: 2px solid #0A5EB0

90-100:
┌─────────────────────────────────┐
│ Оценка (0-100)                  │
│ [____95____]                    │
│ 🟢 Отлично                      │
└─────────────────────────────────┘
Background: rgba(52, 199, 89, 0.1)
Border: 2px solid #34C759
```

---

## 📊 Система данных

### TypeScript типы

```typescript
// Пользователь
interface User {
  id: string;
  name: string;
  email: string;
  role: 'student' | 'curator' | 'admin';
  avatar?: string;
  telegramId?: number;
}

// Урок
interface Lesson {
  id: number;
  title: string;
  description: string;
  date: string;
  time: string;
  zoomLink: string;
  status: 'upcoming' | 'today' | 'completed';
  materials?: string[];
}

// Домашка
interface Homework {
  id: number;
  title: string;
  description: string;
  lessonId: number;
  deadline: string;
  status: 'not-submitted' | 'pending' | 'reviewed';
  grade?: number;
  comment?: string;
  fileUrl?: string;
}

// Сдача работы
interface Submission {
  id: number;
  homeworkId: number;
  studentId: string;
  studentName: string;
  submittedDate: string;
  fileUrl: string;
  status: 'pending' | 'reviewed';
  grade?: number;
  comment?: string;
}

// Прогресс студента
interface Progress {
  userId: string;
  attendance: number;          // процент
  homeworkCompletion: number;  // процент
  averageGrade: number;        // 0-100
  lessons: {
    attended: number;
    total: number;
  };
  homeworks: {
    completed: number;
    total: number;
  };
}

// Группа
interface Group {
  id: string;
  name: string;
  description: string;
  curatorId?: string;
  curatorName?: string;
  studentCount: number;
  courseIds: string[];
}

// Курс
interface Course {
  id: string;
  name: string;
  description: string;
  curatorIds: string[];  // много кураторов
  groupIds: string[];
  lessonsCount: number;
}

// Статистика группы
interface GroupStats {
  totalStudents: number;
  averageAttendance: number;
  averageHomeworkCompletion: number;
  averageGrade: number;
}
```

### Mock данные (текущие)

```typescript
// src/data/mockData.ts

currentUser: {
  id: '1',
  name: 'Всеволод Марченко',
  email: 'vsevolod@example.com',
  role: 'student',
  telegramId: 123456789
}

mockLessons: [
  {
    id: 1,
    title: 'Древняя Русь: от призвания варягов до Владимира',
    date: '2025-10-10',
    time: '18:00',
    status: 'today',
    zoomLink: 'https://zoom.us/j/123456789'
  },
  // ... ещё 2 урока
]

mockHomework: [
  {
    id: 1,
    title: 'Первые князья',
    deadline: '2025-10-12',
    status: 'not-submitted'
  },
  {
    id: 2,
    title: 'Источники по монгольскому периоду',
    deadline: '2025-10-08',
    status: 'pending'
  },
  {
    id: 3,
    title: 'Феодальная раздробленность',
    deadline: '2025-10-05',
    status: 'reviewed',
    grade: 95,
    comment: 'Отличная работа!'
  }
]

mockProgress: {
  userId: '1',
  attendance: 92,
  homeworkCompletion: 78,
  averageGrade: 88,
  lessons: { attended: 11, total: 12 },
  homeworks: { completed: 7, total: 9 }
}

mockGroups: [
  {
    id: '1',
    name: 'История России 2025',
    curatorId: '2',
    curatorName: 'Юля Арбузова',
    studentCount: 15,
    courseIds: ['course1']
  }
]

mockCourses: [
  {
    id: 'course1',
    name: 'История России: от Древней Руси до ХХ века',
    curatorIds: ['2'],
    groupIds: ['1', '2'],
    lessonsCount: 24
  }
]
```

### API endpoints (будущее)

```
Authentication:
POST   /api/auth/telegram        - Авторизация через Telegram
POST   /api/auth/login           - Логин (email/password)
POST   /api/auth/logout          - Выход
GET    /api/auth/me              - Текущий пользователь

Users:
GET    /api/users                - Все пользователи (admin)
GET    /api/users/:id            - Один пользователь
POST   /api/users                - Создать куратора (admin)
PUT    /api/users/:id            - Обновить пользователя
DELETE /api/users/:id            - Удалить пользователя (admin)

Courses:
GET    /api/courses              - Все курсы
GET    /api/courses/:id          - Один курс
POST   /api/courses/:id/curators - Назначить куратора (admin)
DELETE /api/courses/:id/curators/:curatorId - Снять куратора

Groups:
GET    /api/groups               - Все группы
GET    /api/groups/:id           - Одна группа
PUT    /api/groups/:id/curator   - Назначить куратора (admin)

Lessons:
GET    /api/lessons              - Все уроки
GET    /api/lessons/:id          - Один урок
POST   /api/lessons              - Создать урок (admin)
PUT    /api/lessons/:id          - Обновить урок (admin)
DELETE /api/lessons/:id          - Удалить урок (admin)

Homework:
GET    /api/homework             - Все домашки (по роли)
GET    /api/homework/:id         - Одна домашка
POST   /api/homework             - Создать (curator)
PUT    /api/homework/:id         - Обновить (curator)
DELETE /api/homework/:id         - Удалить (curator)

Submissions:
GET    /api/submissions          - Все сдачи (curator/student)
GET    /api/submissions/:id      - Одна сдача
POST   /api/submissions          - Сдать работу (student)
PUT    /api/submissions/:id      - Изменить (student before review)
POST   /api/submissions/:id/grade - Выставить оценку (curator)

Progress:
GET    /api/progress/me          - Мой прогресс (student)
GET    /api/progress/students/:id - Прогресс студента (curator)
GET    /api/progress/group/:id   - Прогресс группы (curator)

Files:
POST   /api/files/upload         - Загрузить файл
GET    /api/files/:id            - Скачать файл
DELETE /api/files/:id            - Удалить файл
```

---

## 🚀 Планы развития

### ✅ Этап 1: Дизайн (Завершён)

- [x] Настройка проекта (React + TypeScript + Vite)
- [x] Конфигурация Tailwind CSS
- [x] Система тем (светлая/тёмная)
- [x] Базовые UI компоненты
- [x] Layout и навигация (mobile + desktop)
- [x] Страницы для студента (5 страниц)
- [x] Страницы для куратора (3 страницы)
- [x] Админ-панель (4 вкладки)
- [x] Переключение ролей
- [x] Адаптивный дизайн
- [x] Анимации и transitions

### 🔄 Этап 2: Backend интеграция

- [ ] Настройка API клиента (axios)
- [ ] Подключение к backend API
- [ ] Авторизация и аутентификация
- [ ] CRUD операции для уроков
- [ ] CRUD операции для домашек
- [ ] Система загрузки/скачивания файлов
- [ ] Real-time обновления (WebSocket)
- [ ] Error handling и loading states

### 🤖 Этап 3: Telegram интеграция

- [ ] Инициализация Telegram Mini App SDK
- [ ] Авторизация через Telegram
- [ ] Получение данных пользователя
- [ ] Интеграция с Telegram Bot
- [ ] Push-уведомления
- [ ] Отправка сообщений в Telegram
- [ ] Deep linking
- [ ] Адаптация UI под Telegram theme

### 🎥 Этап 4: Zoom интеграция

- [ ] Настройка Zoom API
- [ ] Автоматическое создание встреч
- [ ] Получение ссылок на занятия
- [ ] Календарь занятий
- [ ] Напоминания о занятиях
- [ ] Запись уроков

### 📊 Этап 5: Аналитика и отчёты

- [ ] Детальная статистика по студентам
- [ ] Графики и диаграммы (Chart.js)
- [ ] Экспорт отчётов (PDF, Excel)
- [ ] История посещаемости
- [ ] Динамика успеваемости
- [ ] Сравнительный анализ

### 💬 Этап 6: Коммуникация

- [ ] Чат между студентом и куратором
- [ ] Групповой чат
- [ ] Комментарии к домашкам
- [ ] Система уведомлений
- [ ] Email рассылки

### 🎯 Этап 7: Дополнительный функционал

- [ ] Система достижений и бейджей
- [ ] Рейтинг студентов
- [ ] Календарь дедлайнов
- [ ] Материалы к урокам
- [ ] Тесты и квизы
- [ ] Видео-материалы
- [ ] Ссылки на полезные ресурсы

### 🔐 Этап 8: Безопасность

- [ ] Защита от XSS и CSRF
- [ ] Rate limiting
- [ ] Валидация данных
- [ ] Шифрование чувствительных данных
- [ ] Логирование действий
- [ ] Резервное копирование

### 🚀 Этап 9: Оптимизация

- [ ] Code splitting
- [ ] Lazy loading
- [ ] Image optimization
- [ ] Caching стратегия
- [ ] PWA функционал
- [ ] Offline режим
- [ ] Performance мониторинг

### 🧪 Этап 10: Тестирование

- [ ] Unit тесты (Vitest)
- [ ] Integration тесты
- [ ] E2E тесты (Playwright)
- [ ] Visual regression тесты
- [ ] Accessibility тесты
- [ ] Performance тесты

---

## 📝 Примечания

### Текущие ограничения

1. **Нет backend** - все данные mock
2. **Нет авторизации** - свободное переключение ролей
3. **Нет файловой системы** - кнопки загрузки/скачивания - заглушки
4. **Нет Telegram интеграции** - можно тестировать в браузере
5. **Нет Zoom API** - ссылки статичные
6. **Нет реальных уведомлений**

### Команды разработки

```bash
# Установка зависимостей
npm install

# Запуск dev сервера
npm run dev

# Сборка для продакшена
npm run build

# Preview продакшен сборки
npm run preview

# Линтинг
npm run lint
npm run lint:fix

# Type checking
npm run type-check
```

### Переменные окружения (будущее)

```env
# .env
VITE_API_URL=http://localhost:3000/api
VITE_TELEGRAM_BOT_TOKEN=your_bot_token
VITE_ZOOM_API_KEY=your_zoom_key
VITE_ZOOM_API_SECRET=your_zoom_secret
```

### Полезные ссылки

- [React Documentation](https://react.dev/)
- [TypeScript Handbook](https://www.typescriptlang.org/docs/)
- [Tailwind CSS Docs](https://tailwindcss.com/docs)
- [Telegram Mini Apps](https://core.telegram.org/bots/webapps)
- [Lucide Icons](https://lucide.dev/)
- [Apple HIG](https://developer.apple.com/design/human-interface-guidelines/)

---

## 🎓 Вывод

**"Кружок Станкевича" Telegram Mini App** - это полнофункциональная образовательная платформа с продуманным UX/UI, современным стеком технологий и масштабируемой архитектурой.

**Текущее состояние:** Все интерфейсы реализованы, дизайн завершен, работает с mock данными.

**Следующий шаг:** Интеграция с backend API для превращения в полноценное приложение.

**Философия проекта:** Простота, элегантность, функциональность - всё что нужно для эффективного обучения, ничего лишнего.

---

*Документ создан: 9 октября 2025*
*Версия: 1.0.0*
*Статус проекта: Этап 1 (Дизайн) - Завершен ✅*



